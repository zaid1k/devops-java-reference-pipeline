pipeline{
agent any
// in order to run mvn we ned to define tools section
tools {
maven 'mvn'
}
    stages{
        stage('Build Stage'){
            steps{
                echo "Building the Project"
                // standar code to built any "mvn" like a project
                // it will download various depedency so no need to worry
                sh 'mvn clean package'
            }
            //if the above step is sucesful then run the below steps
            post{
             success {
              echo "My project was built succesfully"
              //we will used in built plugins of jenkins to run the test to archive the ".jar" in workspaces
              junit allowEmptyResults: true, testResults: 'target/surefire-reports/*.xml'
              archiveArtifacts 'target/*.jar'
             }
             failure{
             // send some email to the group,for this we need to setup smtp server
             echo "My project had compilation issue"
             }
            }
        }
        stage('Static Code Analysis'){
            steps{    
                echo "Analyzing the code with Sonar"
            }
        }
        stage('Build a Docker Image'){
            steps{
                echo "Building the docker Image"
            }
        }
        stage('Going to trigger the Acceptance Pipeline'){
            steps{
                echo "Going to trigger the Acceptance Pipeline"
                build job: 'equity-acceptance-pipeline'
            
            }
        }
    }
}

